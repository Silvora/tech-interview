---
title: QUIC原理?
date: 2024-11-19 14:35:46
categories: 
- HTTP
---

# QUIC原理?


## 一、什么是QUIC?

`QUIC(Quick UDP Internet Connection)`是谷歌推出的一套基于 `UDP` 的传输协议，它实现了 `TCP + HTTPS + HTTP/2` 的功能，目的是保证可靠性的同时降低网络延迟。因为 `UDP` 是一个简单传输协议，基于 `UDP` 可以摆脱 `TCP` 传输确认、重传慢启动等因素，建立安全连接只需要一的个往返时间，它还实现了 `HTTP/2` 多路复用、头部压缩等功能


众所周知 `UDP` 比 `TCP` 传输速度快，`TCP` 是可靠协议，但是代价是双方确认数据而衍生的一系列消耗。其次 `TCP` 是系统内核实现的，如果升级 `TCP` 协议，就得让用户升级系统，这个的门槛比较高，而 `QUIC` 在 `UDP` 基础上由客户端自由发挥，只要有服务器能对接就可以。

`QUIC`协议是一种基于`UDP`的传输协议，它旨在提供更高效、更可靠的数据传输服务

![](https://cdn.jsdelivr.net/gh//Silvora/oss@main/images/20241219145050827.jpeg)

## 二、QUIC协议的特点和优势

`QUIC`协议在应用层之上基于`UDP`实现丢包恢复、拥塞控制、加解密、多路复用等功能。与传统的`TCP`协议相比，`QUIC`协议在以下几个方面进行了优化:

- 握手建连更快：`QUIC`协议通过使用`UDP`代替`TCP`，减少了握手建连的时间。同时，`QUIC`协议采用了`TLS 1.3`协议，允许客户端在`TLS`握手完成之前就开始发送应用程序数据，进一步缩短了握手时间。
![](https://cdn.jsdelivr.net/gh//Silvora/oss@main/images/20241219154537552.webp)


- 避免队首阻塞的多路复用：在传统的`TCP`协议中，多个数据请求需要共享一条`TCP`连接，应用层必须按序处理这些数据流。而`QUIC`协议允许多个数据流共享一条`UDP`连接，并且每个数据流都有自己的序列号，避免了队首阻塞的问题。

- 快速重传和恢复机制：`QUIC`协议采用了一种基于时间戳的传输机制，当数据包丢失时，接收方可以快速请求重传，而发送方则可以根据时间戳来判断哪些数据包是重复的或者丢失的，并进行相应的处理。

- 拥塞控制和流量控制：`QUIC`协议采用了一种基于速率的拥塞控制算法，可以根据网络状况动态调整发送速率，避免了网络拥塞的发生。同时，`QUIC`协议还支持双向流量控制，确保了数据传输的稳定性。

- 低延迟：由于`QUIC`协议的握手建连时间更短，数据传输过程中的丢包重传时间更短，因此它能够显著降低延迟。这对于需要实时通信的应用场景来说是非常重要的。

- 切换网络操持连接: 一条 `TCP` 连接是由四元组标识的（源 `IP`，源端口，目的 `IP`，目的端口）。客户端的 `IP` 肯定会发生变化，需要重新建立和服务端的 `TCP` 连接。`QUIC` 基于连接 `ID` 唯一识别连接。当源地址发生改变时，`QUIC` 仍然可以保证连接存活和数据正常收发。`QUIC` 连接不再以 `IP` 及端口四元组标识，而是以一个 `64` 位的随机数作为 `ID` 来标识

- 高吞吐量：`QUIC`协议允许多个数据流共享一条连接，而且采用流式传输的方式进行数据传输，可以充分利用带宽资源，提高吞吐量。

- 更好的安全性：`TCP` 协议头部没有经过任何加密和认证，所以在传输过程中很容易被中间网络设备篡改，注入和窃听。比如修改序列号、滑动窗口。这些行为有可能是出于性能优化，也有可能是主动攻击。`QUIC`协议采用了`TLS 1.3`协议进行加密通信，相比传统的`HTTPS`协议更加安全可靠。同时，`QUIC`协议还支持多种加密套件和加密算法，可以更好地满足用户的安全需求。与`TLS1.3`高效协作，绝大部分头部和所有数据都被加密，所有信息都是认证的，每次会话使用新密钥。

- 更好的支持多平台：由于`QUIC`协议基于`UDP`，它可以在各种不同的操作系统和平台上运行，包括`Windows`、`Linux`、`iOS`和`Android`等。这使得开发者可以更加方便地部署和测试他们的应用程序。